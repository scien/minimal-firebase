(function(){var t,e;e=function(){var t,e,r,o,n,s,u,i,a,l,c,p;for(s=null,u={},c=null,r=0,n=arguments.length;n>r;r++)switch(t=arguments[r],typeof t){case"function":s=t;break;case"object":u=t;break;case"string":c=t}return e=encodeURIComponent,i=function(){var t;t=[];for(o in u)p=u[o],t.push(e(o)+"="+e(p));return t}(),i=i.join("&"),i=i.replace("%20","+"),i.length>0&&(c=c+"?"+i),l=null,a=new XMLHttpRequest,a.open("GET",c,null!=s),a.onreadystatechange=function(){var t;if(4===a.readyState){if(!(a.status>=200&&a.status<400))return s(a.responseText);try{if(l=JSON.parse(a.responseText),s)return s(null,l)}catch(e){return t=e,s(t)}}},a.send(),s?a:l},t=function(){function t(t){var e;if(this.url=t.replace(/\/$/,""),!this.root())throw new Error("Invalid firebase url: "+t);e=this.getAuth(),(null!=e?e.token:void 0)&&this.authWithCustomToken(e.token)}return t.prototype.authAnonymously=function(t){var r,o,n,s;return n=null!=(o=/https:\/\/([a-z0-9-]+)\.firebaseio\.com.*/.exec(this.url))?o[1]:void 0,s="https://auth.firebase.com/v2/"+n+"/auth/anonymous",r={suppress_status_codes:!0,transport:"json",v:"js-2.2.9"},e(s,r,t)},t.prototype.authWithPassword=function(t,r,o){var n,s,u,i;return u=null!=(s=/https:\/\/([a-z0-9-]+)\.firebaseio\.com.*/.exec(this.url))?s[1]:void 0,i="https://auth.firebase.com/v2/"+u+"/auth/password",n={email:t,password:r,suppress_status_codes:!0,transport:"json",v:"js-2.2.9"},e(i,n,function(t,e){return t?o(t):e.error?o(e.error):o(null,e)})},t.prototype.authWithCustomToken=function(t){return this.token=t},t.prototype.child=function(t){return t=t.split(/[\/\.]/g),t=t.join("/"),new MinimalFirebase(this.url+"/"+t)},t.prototype.createUser=function(t,r,o){var n,s,u,i;return u=null!=(s=/https:\/\/([a-z0-9-]+)\.firebaseio\.com.*/.exec(this.url))?s[1]:void 0,i="https://auth.firebase.com/v2/"+u+"/users",n={_method:"POST",email:t,password:r,suppress_status_codes:!0,transport:"json",v:"js-2.3.1"},e(i,n,function(t,e){return t?o(t):e.error?o(e.error):o(null,e)})},t.prototype.getAuth=function(){var t,e;return e=null!=(t=/https:\/\/([a-z0-9-]+)\.firebaseio\.com.*/.exec(this.url))?t[1]:void 0,"undefined"!=typeof localStorage&&null!==localStorage?localStorage["firebase:session::"+e]:void 0},t.prototype.key=function(){var t;return this.url===this.root()?null:(t=this.url.lastIndexOf("/"),this.url.slice(t+1))},t.prototype.parent=function(){var t,e,r;return r=this.url.replace(this.root(),""),t=r.lastIndexOf("/"),e=r.slice(0,t),""===e?null:new MinimalFirebase(""+this.root()+e)},t.prototype.root=function(){var t;return t=/(https:\/\/[a-z0-9-]+\.firebaseio\.com).*/.exec(this.url),null!=t?t[1]:void 0},t.prototype.toString=function(){return this.url},t.prototype.once=function(){var t,r,o,n,s,u,i,a,l,c;for(l={},a=null,n=0,u=arguments.length;u>n;n++)switch(t=arguments[n],typeof t){case"object":l=t;break;case"function":a=t}for(o=["orderBy","equalTo","startAt","endAt"],s=0,i=o.length;i>s;s++)r=o[s],"string"==typeof l[r]&&(l[r]='"'+l[r]+'"');return this.token&&(l.auth=this.token),c=this.url+".json",a?e(c,l,a):e(c,l)},t}(),window.MinimalFirebase=t,module.exports=t}).call(this);